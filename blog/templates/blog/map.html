{% extends "blog/base.html" %}
{% load static %}

{% load leaflet_tags %}

{% block extra_css %}
{% leaflet_css %}
<link rel="stylesheet" type="text/css" href="{% static 'blog/map.css' %}"/>
{% endblock extra_css %}


{% block content %}

<center>
<div id="map">
    {% leaflet_map "map_studenteats" callback="window.setupMap" %}
</div>
</center>

<script>
    function setupMap(map, option) {
      function showUserLocation(userLocation){
	    let latitude = userLocation.coords.latitude;
	    let longitude = userLocation.coords.longitude;

	    let marker = L.marker([latitude, longitude]).addTo(map);
	    marker.bindPopup("Your (approximate) position").openPopup();
	    map.setView([latitude, longitude], 15);
      }
     map.setView([50.8466, 4.3528], 11);
	 if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(showUserLocation, () => {});
	 }
    }
</script>

{% block extra_jss %}
    {% leaflet_js %}
{% endblock extra_jss %}

{% endblock content %}
